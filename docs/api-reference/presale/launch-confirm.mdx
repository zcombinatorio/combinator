---
title: "Confirm Presale Launch"
description: "POST /presale/:tokenAddress/launch-confirm - Submit signed transaction to complete presale launch"
---

## Overview

Receives a creator-signed launch transaction from `/launch`, validates the transaction structure matches the original, adds escrow and base mint signatures, submits to Solana, and updates the presale status to 'launched'. This endpoint also initializes vesting claims and records tokens bought.

<CodeGroup>

```bash curl
curl -X POST https://api.zcombinator.io/presale/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/launch-confirm \
  -H "Content-Type: application/json" \
  -d '{
    "signedTransaction": "4MzR7dxJNJRVP1Q6k7Y3j8X...",
    "transactionId": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
  }'
```

```javascript fetch
const response = await fetch(
  'https://api.zcombinator.io/presale/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/launch-confirm',
  {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      signedTransaction: signedTransactionBase58,
      transactionId: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
    })
  }
);

const result = await response.json();
```

```python requests
import requests

data = {
    "signedTransaction": signed_transaction_base58,
    "transactionId": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"
}

response = requests.post(
    'https://api.zcombinator.io/presale/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/launch-confirm',
    json=data,
    headers={'Content-Type': 'application/json'}
)

result = response.json()
```

</CodeGroup>

## URL Parameters

<ParamField path="tokenAddress" type="string" required>
  The Solana token mint address of the presale
</ParamField>

## Request Parameters

<ParamField body="signedTransaction" type="string" required>
  Base58 encoded transaction signed by the creator's wallet
</ParamField>

<ParamField body="transactionId" type="string" required>
  Unique transaction identifier returned from `/launch`
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Indicates if the operation was successful
</ResponseField>

<ResponseField name="signature" type="string">
  The Solana transaction signature/hash
</ResponseField>

<ResponseField name="message" type="string">
  Success message confirming the launch
</ResponseField>

### Success Response

```json
{
  "success": true,
  "signature": "5VfYiDvQMBSWxKJLa9NLPQ1x3...",
  "message": "Presale launched successfully!"
}
```

## Error Responses

<AccordionGroup>
  <Accordion title="400 - Missing Token Address">
    ```json
    {
      "error": "Token address is required"
    }
    ```
  </Accordion>

  <Accordion title="400 - Missing Signed Transaction">
    ```json
    {
      "error": "Signed transaction is required"
    }
    ```
  </Accordion>

  <Accordion title="400 - Missing Transaction ID">
    ```json
    {
      "error": "Transaction ID is required"
    }
    ```
  </Accordion>

  <Accordion title="400 - Transaction Not Found">
    ```json
    {
      "error": "Transaction not found or expired. Please restart the launch process."
    }
    ```

    The transaction ID is invalid, expired, or already used.
  </Accordion>

  <Accordion title="400 - Token Mismatch">
    ```json
    {
      "error": "Transaction token mismatch"
    }
    ```

    The stored transaction is for a different token address.
  </Accordion>

  <Accordion title="400 - Invalid Blockhash">
    ```json
    {
      "error": "Invalid transaction: missing blockhash"
    }
    ```

    Or:

    ```json
    {
      "error": "Invalid transaction: blockhash is expired. Please create a new transaction."
    }
    ```

    The transaction's blockhash is missing or no longer valid on-chain.
  </Accordion>

  <Accordion title="400 - Invalid Payer Signature">
    ```json
    {
      "error": "Invalid transaction: must be cryptographically signed by the payer"
    }
    ```

    The transaction was not properly signed by the creator's wallet.
  </Accordion>

  <Accordion title="400 - Transaction Structure Mismatch">
    ```json
    {
      "error": "Invalid transaction: instruction count mismatch. Expected X, got Y"
    }
    ```

    Or:

    ```json
    {
      "error": "Invalid transaction: instruction N program mismatch"
    }
    ```

    Or:

    ```json
    {
      "error": "Invalid transaction: instruction N data mismatch"
    }
    ```

    Or:

    ```json
    {
      "error": "Invalid transaction: instruction N account count mismatch"
    }
    ```

    Or:

    ```json
    {
      "error": "Invalid transaction: instruction N account M pubkey mismatch"
    }
    ```

    Or:

    ```json
    {
      "error": "Invalid transaction: instruction N account M metadata mismatch"
    }
    ```

    The signed transaction structure was modified from the original.
  </Accordion>

  <Accordion title="404 - Presale Not Found">
    ```json
    {
      "error": "Presale not found"
    }
    ```
  </Accordion>

  <Accordion title="400 - Escrow Mismatch">
    ```json
    {
      "error": "Escrow keypair mismatch"
    }
    ```

    The escrow public key doesn't match stored data.
  </Accordion>

  <Accordion title="500 - Configuration Error">
    ```json
    {
      "error": "RPC_URL must be configured"
    }
    ```

    Server configuration is missing.
  </Accordion>

  <Accordion title="500 - Server Error">
    ```json
    {
      "error": "Failed to confirm presale launch"
    }
    ```

    Transaction submission or confirmation failed.
  </Accordion>
</AccordionGroup>

## Process Flow

This endpoint performs comprehensive validation and launch operations:

<Steps>
<Step title="Validate Parameters">
Ensures token address, signed transaction, and transaction ID are provided
</Step>

<Step title="Retrieve Transaction Data">
Fetches stored transaction details using the transaction ID
</Step>

<Step title="Verify Token Match">
Confirms the transaction is for the correct presale token
</Step>

<Step title="Clean Up Storage">
Removes transaction from storage (one-time use)
</Step>

<Step title="Fetch Presale Data">
Retrieves presale and decrypts escrow keypair
</Step>

<Step title="Verify Escrow">
Confirms escrow public key matches stored data
</Step>

<Step title="Reconstruct Base Mint">
Deserializes base mint keypair from stored data
</Step>

<Step title="Deserialize Transaction">
Converts Base58 signed transaction to Solana Transaction object
</Step>

<Step title="Validate Blockhash">
Checks that the transaction has a valid, non-expired blockhash
</Step>

<Step title="Verify Payer Signature">
Cryptographically validates creator's signature using nacl
</Step>

<Step title="Validate Transaction Structure">
Deep validation: compares every instruction, program ID, data, account key, and metadata against the original transaction. This prevents any tampering.
</Step>

<Step title="Add Protocol Signatures">
Signs transaction with escrow and base mint keypairs
</Step>

<Step title="Submit to Blockchain">
Sends fully signed transaction to Solana network
</Step>

<Step title="Wait for Confirmation">
Polls until transaction is confirmed on-chain
</Step>

<Step title="Get Tokens Bought">
Fetches escrow's token account balance to determine tokens purchased
</Step>

<Step title="Initialize Vesting">
Sets up presale claims with vesting schedule
</Step>

<Step title="Update Presale Status">
Updates presale status to 'launched' with base mint address and tokens bought
</Step>

<Step title="Return Success">
Returns confirmation with transaction signature
</Step>
</Steps>

## Security Validations

<Warning>
**Extreme Validation**: This endpoint performs the most thorough transaction validation in the API, comparing every detail of the signed transaction against the original to prevent tampering.
</Warning>

### Deep Structure Validation
- âœ… Instruction count must match exactly
- âœ… Every instruction's program ID must match
- âœ… Every instruction's data must match byte-for-byte
- âœ… Every instruction's account count must match
- âœ… Every account's public key must match
- âœ… Every account's isSigner flag must match
- âœ… Every account's isWritable flag must match

### Cryptographic Verification
- âœ… Payer signature verified with nacl
- âœ… Blockhash validity checked on-chain
- âœ… Escrow keypair verified against presale data

## Transaction Tampering Prevention

<Warning>
**Zero Tolerance**: Any modification to the transaction structure - even changing a single flag or byte - will be rejected.
</Warning>

This prevents:
- Adding malicious instructions
- Changing transfer amounts
- Redirecting funds
- Modifying pool parameters
- Altering account permissions

## Post-Launch Operations

After successful launch, the API automatically:

### 1. Calculates Tokens Bought
Reads the escrow's token account to determine how many presale tokens were purchased from the initial pool buy.

### 2. Initializes Vesting
Calls `initializePresaleClaims()` to:
- Set up vesting schedules for all contributors
- Calculate pro-rata allocations
- Enable claims to start vesting

### 3. Updates Database
Updates the presale record with:
- Status: 'launched'
- Base mint address
- Tokens bought
- Launch timestamp

## Integration Example

```javascript
import { Transaction } from '@solana/web3.js';
import bs58 from 'bs58';

// After user signs the transaction from /launch
const signedTx = await wallet.signTransaction(transaction);

// Submit to confirm endpoint
const response = await fetch(
  `/presale/${tokenAddress}/launch-confirm`,
  {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      signedTransaction: bs58.encode(signedTx.serialize()),
      transactionId: launchResult.transactionId
    })
  }
);

const result = await response.json();

if (result.success) {
  console.log('ðŸš€ Presale launched successfully!');
  console.log(`Transaction: ${result.signature}`);

  // Show link to explorer
  const explorerUrl = `https://explorer.solana.com/tx/${result.signature}`;
  console.log(`View on explorer: ${explorerUrl}`);

  // Redirect to presale page
  window.location.href = `/presale/${tokenAddress}`;
}
```

## After Successful Launch

Once the presale is launched:

1. **Pool Created**: Meteora bonding curve pool is live
2. **Initial Buy Complete**: Escrow bought tokens from the pool
3. **Vesting Active**: Contributors can start claiming vested tokens
4. **Trading Live**: Anyone can trade the token on Meteora

## Transaction Signature

The returned `signature` can be used to:
- View on Solana Explorer: `https://explorer.solana.com/tx/${signature}`
- Verify pool creation on-chain
- Show proof of successful launch
- Track transaction finality

## Error Handling

<Tip>
**Restart on Expiry**: If the blockhash expires, call `/launch` again to get a fresh transaction with a new blockhash.
</Tip>

<Tip>
**Network Issues**: If submission fails due to network problems, the transaction data was already deleted, so you'll need to call `/launch` again.
</Tip>

## Important Notes

<Warning>
**One-Time Use**: The transaction ID and stored data are deleted after use (whether success or failure). You cannot retry with the same transaction ID.
</Warning>

<Warning>
**Irreversible**: Once confirmed, the launch cannot be undone. The pool will be live and tokens will be distributed according to contributions.
</Warning>

<Info>
**Vesting Begins**: Immediately after launch, the 2-week (336 hour) vesting period begins, and contributors can start claiming their tokens.
</Info>

## Next Steps

After a successful launch:

1. **Announce Launch**: Notify contributors the presale is live
2. **Share Pool**: Provide Meteora pool link for trading
3. **Enable Claims**: Direct contributors to claim their vested tokens
4. **Monitor**: Track claiming progress via [`/presale/:tokenAddress/stats`](/api-reference/presale/stats)

## Related Endpoints

- **View Stats**: Use [`/presale/:tokenAddress/stats`](/api-reference/presale/stats) to monitor launch success
- **View Contributions**: Use [`/presale/:tokenAddress/bids`](/api-reference/presale/bids-get) to see all contributors
- **Claim Tokens**: Contributors use [`/presale/:tokenAddress/claims/prepare`](/api-reference/presale/claims-prepare) to claim
